{"version":3,"file":"index.mjs","sources":["../lib/main.js","../lib/polyfill.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\nvar f16round = ( typeof Math.f16round === 'function' ) ? Math.f16round : null; // eslint-disable-line stdlib/no-builtin-math\n\n\n// EXPORTS //\n\nexport default f16round;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isFiniteNumber from '@stdlib/math-base-assert-is-finite';\nimport FLOAT16_EPSILON from '@stdlib/constants-float16-eps';\nimport FLOAT16_MAX from '@stdlib/constants-float16-max';\nimport FLOAT16_MIN from '@stdlib/constants-float16-smallest-normal';\nimport EPS from '@stdlib/constants-float64-eps';\nimport PINF from '@stdlib/constants-float64-pinf';\nimport abs from '@stdlib/math-base-special-abs';\n\n\n// VARIABLES //\n\nvar INVERSE_EPSILON = 1.0 / EPS;\n\n\n// FUNCTIONS //\n\n/**\n* Performs banker's rounding (round-half-to-even) via floating-point arithmetic.\n*\n* @private\n* @param {number} n - input value\n* @returns {number} rounded value\n*/\nfunction roundTiesToEven( n ) {\n\treturn ( n + INVERSE_EPSILON ) - INVERSE_EPSILON;\n}\n\n\n// MAIN //\n\n/**\n* Converts a double-precision floating-point number to the nearest half-precision floating-point number.\n*\n* @param {number} x - double-precision floating-point number\n* @returns {number} nearest half-precision floating-point number\n*\n* @example\n* var y = float64ToFloat16( 1.337 );\n* // returns 1.3369140625\n*/\nfunction float64ToFloat16( x ) {\n\tvar res;\n\tvar mod;\n\tvar a;\n\tvar s;\n\n\tif ( x === 0.0 || isNaN( x ) || !isFiniteNumber( x ) ) {\n\t\treturn x;\n\t}\n\tif ( x < 0.0 ) {\n\t\ts = -1.0;\n\t} else {\n\t\ts = 1.0;\n\t}\n\tmod = abs( x );\n\tif ( mod < FLOAT16_MIN ) {\n\t\treturn s * roundTiesToEven( mod/FLOAT16_MIN/FLOAT16_EPSILON ) * FLOAT16_MIN * FLOAT16_EPSILON; // eslint-disable-line max-len\n\t}\n\t// Leverage Veltkamp's algorithm for splitting a number into two numbers to generate an approximation to `x` which fits in a smaller number of bits:\n\ta = ( 1 + ( FLOAT16_EPSILON/EPS ) ) * mod;\n\tres = a - ( a - mod );\n\tif ( res > FLOAT16_MAX || isNaN( res ) ) {\n\t\treturn s * PINF;\n\t}\n\treturn s * res;\n}\n\n\n// EXPORTS //\n\nexport default float64ToFloat16;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Convert a double-precision floating-point number to the nearest half-precision floating-point number.\n*\n* @module @stdlib/number-float64-base-to-float16\n*\n* @example\n* import float64ToFloat16 from '@stdlib/number-float64-base-to-float16';\n*\n* var y = float64ToFloat16( 1.337 );\n* // returns 1.3369140625\n*/\n\n// MODULES //\n\nimport builtin from './main.js';\nimport polyfill from './polyfill.js';\n\n\n// MAIN //\n\nvar main;\nif ( typeof builtin === 'function' ) {\n\tmain = builtin;\n} else {\n\tmain = polyfill;\n}\n\n\n// EXPORTS //\n\nexport default main;\n"],"names":["f16round","Math","INVERSE_EPSILON","EPS","main$1","builtin","x","res","mod","a","s","isNaN","isFiniteNumber","abs","FLOAT16_MIN","FLOAT16_EPSILON","FLOAT16_MAX","PINF"],"mappings":";;krBAsBA,IAAIA,EAAsC,mBAAlBC,KAAKD,SAA4BC,KAAKD,SAAW,KCWrEE,EAAkB,EAAMC,ECiB5B,IAAAC,EATwB,mBAAZC,EACJA,EDoBR,SAA2BC,GAC1B,IAAIC,EACAC,EACAC,EACAC,EAEJ,OAAW,IAANJ,GAAaK,MAAOL,KAAQM,EAAgBN,GACzCA,GAGPI,EADIJ,EAAI,GACH,EAED,GAELE,EAAMK,EAAKP,IACAQ,EACHJ,GAAqBF,EAAIM,EAAYC,EAhChCb,EAAoBA,GAgCgCY,EAAcC,GAI/ER,GADAE,GAAM,EAAMM,EAAgBZ,GAAUK,IAC1BC,EAAID,IACLQ,GAAeL,MAAOJ,GACzBG,EAAIO,EAELP,EAAIH,EACZ"}